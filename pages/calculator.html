<!DOCTYPE html><html><head><meta charset="utf-8"><title>Calculator</title><meta name="viewport" content="width=device-width,initial-scale=1"><link href="css/common.css" rel="stylesheet"><link href="css/calculator.css" rel="stylesheet"><script src="js/nav.js" defer="defer"></script></head><body><div id="nav" page="Calculator"></div><div id="content"><noscript>You need to enable JavaScript to run this app.<h1>How?</h1><h4>iPhone + Safari:</h4><li>Go into the Settings app</li><li>Click "Safari"</li><li>Click "Advanced"</li><li>Swipe the JavaScript button to the right so it appears green.</li><h1>Not working?</h1><h4>Try:</h4><li>iPhone + Chrome</li></noscript><div id="root"></div><div id="temp" class="hide"></div></div><script>const rootEl=document.getElementById("root"),tempEl=document.getElementById("temp");let version=1,status={balance:0,level:0,earnPerHour:0,target:0,benefitThreshold:function(){return this.earnPerHour/this.remainedCash()},expectedTargetReachTime:function(){if(this.earnPerHour)return formatTime(this.remainedCash()/this.earnPerHour)},remainedCash:function(){return this.target-this.balance}};const groups=["PR & Team","Markets","Legal","Web3","Specials","Other"];let upgrades=[],currentUpgrade=null;const EditMode={None:"None",Balance:"Balance",Level:"Level",EarnPerHour:"EarnPerHour",Target:"Target"};let editMode=EditMode.None;function realtimeEarn(){status.balance+=Math.floor(status.earnPerHour/3600),setTimeout(realtimeEarn,1e3)}function drawContent(){rootEl.innerHTML="",ActionBarEl(),ItemAdditionEl(onUpgradeAdded,clearCurrentUpgrade,removeUpgrade),CurrentStatusEl(onBalanceEdit,onConfirmBalance,closeBalanceEdit,onLevelEdit,onConfirmLevel,closeLevelEdit,onEPHEdit,onConfirmEPH,closeEPHEdit,onTargetEdit,onConfirmTarget,onCloseTargetEdit),UpgradeListEl(onUpgradeSelected)}async function readFile(e){e=await e.target.files.item(0).text(),e=JSON.parse(e);version=e.version+1,Object.assign(status,e.status),upgrades=toImportFormat(e),drawContent()}function ActionBarEl(){var t=rootEl.appendChild(document.createElement("div"));t.className="action-bar";{var n;const e=(n=t).appendChild(document.createElement("button")),r=(e.textContent="Import",e.className="normal-button-padding",function(){tempEl.innerHTML="";var e=tempEl.appendChild(document.createElement("input"));return e.type="file",e.onchange=e=>readFile(e),e}());e.onclick=()=>r.click()}var n=t,n=((n=n.appendChild(document.createElement("button"))).textContent="Export",n.className="normal-button-padding",n.onclick=()=>{var e,t;upgrades.sort((e,t)=>e.group.localeCompare(t.group)||e.title.localeCompare(t.title)),e={version:version,status:status,upgrades:toExportFormat(upgrades)},tempEl.innerHTML="",(t=tempEl.appendChild(document.createElement("a"))).download="Hamster.json",e=new Blob([JSON.stringify(e,null,2)]),t.href=window.URL.createObjectURL(e),t.click()},t),a=drawContent;(n=n.appendChild(document.createElement("button"))).textContent="Refresh",n.className="normal-button-padding",n.onclick=a;{(n=(n=t).appendChild(document.createElement("p"))).className="reach-time";let e=(a=status.expectedTargetReachTime())?"Target Reach Time: "+a:"";n.textContent=e}}function ItemAdditionEl(e,t,n){var a=rootEl.appendChild(document.createElement("div"));a.id="settings";{var r=e;e=t,t=n;const s=a.appendChild(document.createElement("div")),p=(s.className="add-group-form",function(e){e=e.appendChild(document.createElement("select"));e.setAttribute("name","group"),e.className="centered-text",function(e){e=e.appendChild(document.createElement("option"));e.setAttribute("value",null),e.textContent="-- Select Group --"}(e),function(n){groups.forEach(e=>{var t=n.appendChild(document.createElement("option"));t.setAttribute("value",e),t.textContent=e})}(e),currentUpgrade&&(e.value=currentUpgrade.group);return e}(s)),m=function(e){e=e.appendChild(document.createElement("input"));e.setAttribute("type","text"),e.setAttribute("name","title"),e.setAttribute("placeholder","Title"),currentUpgrade&&(e.value=currentUpgrade.title);return e}(s),E=function(e){e=e.appendChild(document.createElement("input"));e.setAttribute("type","number"),e.setAttribute("name","level"),e.setAttribute("placeholder","Level"),currentUpgrade&&(e.value=currentUpgrade.level);return e}(s),g=function(e){e=e.appendChild(document.createElement("input"));e.setAttribute("type","number"),e.setAttribute("name","value"),e.setAttribute("placeholder","Value"),currentUpgrade&&(e.value=currentUpgrade.value);return e}(s),v=function(e){e=e.appendChild(document.createElement("input"));e.setAttribute("type","number"),e.setAttribute("name","cost"),e.setAttribute("placeholder","Cost"),currentUpgrade&&(e.value=currentUpgrade.cost);return e}(s);var o=s,d=function(){var e={group:p.value,title:m.value,value:+g.value,cost:+v.value,level:+E.value};checkUpgradeItemSanity(e)&&r(e)},l=((o=o.appendChild(document.createElement("button"))).className="positive-button",o.textContent="Add",o.onclick=d,s),i=e,u,c;(l=l.appendChild(document.createElement("button"))).className="negative-button",l.textContent="Clear",l.onclick=i,currentUpgrade&&(c=t,(u=(u=s).appendChild(document.createElement("button"))).className="negative-button",u.textContent="Remove",u.onclick=c)}}function CurrentStatusEl(e,t,n,a,r,o,d,l,i,u,c,s){var p=rootEl.appendChild(document.createElement("table")),m=(p.className="current-status",p),[m,{balance:p,level:e,earnPerHour:t,target:n},a,r,o,d,l,i,u,c,s,E,g,v]=(m=m.appendChild(document.createElement("thead")),editModeIsNoneOr(EditMode.Balance)&&TdElWithText(m,"Balance"),editModeIsNoneOr(EditMode.Level)&&TdElWithText(m,"Level"),editModeIsNoneOr(EditMode.EarnPerHour)&&TdElWithText(m,"Earn / Hour"),editModeIsNoneOr(EditMode.Target)&&TdElWithText(m,"Target"),[p,status,e,t,n,a,r,o,d,l,i,u,c,s]);function h(e,t,n,a,r){e=e.appendChild(document.createElement("div"));e.className="flex-row";let o;var d=e,d=((d=d.appendChild(document.createElement("button"))).textContent="Cancel",d.classList.add("negative-button","normal-button-padding"),d.onclick=r,o=function(e,t,n){e=e.appendChild(document.createElement("input"));return e.type="number",e.classList.add("centered-text","extend"),e.value=n,e.name=t,e}(e,t,n),e),r=()=>a(o.value);(d=d.appendChild(document.createElement("button"))).textContent="Confirm",d.classList.add("positive-button","normal-button-padding"),d.onclick=r}var f=m=(m=m.appendChild(document.createElement("tbody"))).appendChild(document.createElement("tr")),C=(editMode===EditMode.Balance?((C=TdEl(f)).className="no-padding",h(C,"balance",p,r,o)):editMode===EditMode.None&&(TdElWithText(f,p.toLocaleString()+" $").onclick=a),m),r=e,o=d,f=l,p=i,e=(editMode===EditMode.Level?((a=TdEl(C)).className="no-padding",h(a,"level",r,f,p)):editMode===EditMode.None&&(TdElWithText(C,r).onclick=o),m),d=t,l=u,i=c,a=s,p=(editMode===EditMode.EarnPerHour?((f=TdEl(e)).className="no-padding",h(f,"earn-per-hour",d,i,a)):editMode===EditMode.None&&(TdElWithText(e,d.toLocaleString()+" $").onclick=l),m),r=n,o=E,t=g,u=v;editMode===EditMode.Target?((c=TdEl(p)).className="no-padding",h(c,"target",r,t,u)):editMode===EditMode.None&&(TdElWithText(p,r.toLocaleString()+" $").onclick=o)}function UpgradeListEl(e){var t=rootEl.appendChild(document.createElement("table")),n=(t.className="content",t);TdElWithText(n=n.appendChild(document.createElement("thead")),"Group"),TdElWithText(n,"Title"),TdElWithText(n,"Level"),TdElWithText(n,"Value ($)"),TdElWithText(n,"Cost ($)"),TdElWithText(n,"Benefit (%)");{var o=e;const d=(n=t).appendChild(document.createElement("tbody")),l=status.benefitThreshold();upgrades.filter(e=>e.cost<status.balance).map(e=>({...e,benefit:e.value/e.cost})).sort((e,t)=>t.benefit-e.benefit).forEach(e=>{var t=d.appendChild(document.createElement("tr")),n=(currentUpgrade&&e.title===currentUpgrade.title&&t.setAttribute("selected",""),t.onclick=()=>o(e),n=e.group,r(t,n),n=e.title,r(t,n),t),a=e.level,a=((n=r(n,a)).className="centered-text",t),n=e.value,n=((a=r(a,n.toLocaleString())).className="centered-text",t),a=e.cost,a=((n=r(n,a.toLocaleString())).className="centered-text",t),n=e.benefit;function r(e,t){e=e.appendChild(document.createElement("td"));return e.textContent=t,e}a=r(a,(100*n).toPrecision(4)),n<l&&a.classList.add("red-text"),a.classList.add("centered-text")})}}function onUpgradeAdded(t){var e=upgrades.findIndex(e=>e.title===t.title);-1===e?upgrades.push(t):(status.balance-=upgrades[e].cost,t.level+=1,upgrades[e]=t),currentUpgrade=t,drawContent()}function checkUpgradeItemSanity({group:e,title:t,value:n,cost:a,level:r}){var o;for(o of[{title:"Group",value:e,evaluator:function(e){return"null"===e}},{title:"Title",value:t,evaluator:function(e){return""===e}},{title:"Value",value:n,evaluator:d},{title:"Cost",value:a,evaluator:d},{title:"Level",value:r,evaluator:function(e){return e<0}}])if(o.evaluator(o.value))return alert(`Invalid ${o.title}: "${o.value}"`),!1;function d(e){return e<=0}return!0}function onUpgradeSelected(e){currentUpgrade={...e,value:"",cost:""},drawContent()}function clearCurrentUpgrade(){currentUpgrade=null,drawContent()}function removeUpgrade(){var e;null!==currentUpgrade&&-1!==(e=upgrades.findIndex(e=>e.title===currentUpgrade.title))&&upgrades.splice(e,1),currentUpgrade=null,drawContent()}function onBalanceEdit(){editMode=EditMode.Balance,drawContent()}function onConfirmBalance(e){status.balance=+e,closeBalanceEdit()}function closeBalanceEdit(){editMode=EditMode.None,drawContent()}function onLevelEdit(){editMode=EditMode.Level,drawContent()}function onConfirmLevel(e){status.level=e,closeLevelEdit()}function closeLevelEdit(){editMode=EditMode.None,drawContent()}function onEPHEdit(){editMode=EditMode.EarnPerHour,drawContent()}function onConfirmEPH(e){status.earnPerHour=+e,closeEPHEdit()}function closeEPHEdit(){editMode=EditMode.None,drawContent()}function onTargetEdit(){editMode=EditMode.Target,drawContent()}function onConfirmTarget(e){status.target=+e,onCloseTargetEdit()}function onCloseTargetEdit(){editMode=EditMode.None,drawContent()}function formatTime(e){var t,n=[];return 0===e?"0h":e?(24<e&&(e-=24*(t=Math.floor(e/24)),n.push(t+"d")),e&&n.push(Math.floor(e)+"h"),n.join(" ")):""}function editModeIsNoneOr(e){return editMode===EditMode.None||editMode===e}function TdEl(e){return e.appendChild(document.createElement("td"))}function TdElWithText(e,t){e=e.appendChild(document.createElement("td"));return e.textContent=t,e}function toExportFormat(e){let a={};return e.forEach(e=>{e.group in a||(a[e.group]=[]);const{group:t,...n}=e;a[e.group].push(n)}),a}function toImportFormat({upgrades:e}){let t=[];for(group in e)e[group].forEach(e=>t.push({group:group,...e}));return t}realtimeEarn(),drawContent()</script></body></html>